# STUN/TURN server configuration

# Listening port for STUN/TURN
listening-port=3478

# TLS listening port for STUN/TURN over TLS/DTLS
tls-listening-port=5349

# Listening IP addresses
listening-ip=0.0.0.0

# External IP address
# This should be set to the public IP address of the server
# For development, this can be left commented out
# external-ip=YOUR_PUBLIC_IP

# Relay IP addresses
relay-ip=0.0.0.0

# TURN server realm
realm=webrtc.local

# Server name
server-name=coturn

# Enable long-term credential mechanism
lt-cred-mech

# Static user credentials (for development/testing)
# In production, use dynamic credentials or database
user=webrtc:password123

# Enable STUN
stun-only=false

# Enable TURN
no-stun=false

# Disable multicast aliases
no-multicast-peers

# Disable loopback peers
no-loopback-peers

# Enable mobility
mobility

# Disable UDP relay endpoints
# no-udp-relay

# Disable TCP relay endpoints
# no-tcp-relay

# Max relay lifetime
max-port=65535
min-port=49152

# Verbose logging (disable in production)
verbose

# Log file
log-file=/var/log/coturn/turnserver.log

# Process ID file
pidfile=/var/run/turnserver.pid

# Run as daemon
# no-daemon

# Certificate files for TLS (optional)
# cert=/etc/ssl/certs/turn_server_cert.pem
# pkey=/etc/ssl/private/turn_server_pkey.pem

# Cipher list for TLS
# cipher-list="ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS"

# Enable fingerprinting
fingerprint

# Disable CLI
no-cli

# Disable RFC5780 support
no-rfc5780

# Disable STUN Binding request
no-stun-backward-compatibility

# Response origin only with rfc5780
response-origin-only-with-rfc5780

# Allocate address family
# default-address-family=ipv4

# Deny access to private IP ranges (security)
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255

# Allow access to specific ranges if needed
# allowed-peer-ip=192.168.1.0-192.168.1.255

# Database configuration (optional)
# For production, consider using Redis or PostgreSQL
# redis-userdb="host=redis dbname=0 password=turn connect_timeout=30"
# psql-userdb="host=localhost dbname=turn user=turn password=turn connect_timeout=30"

# Enable prometheus metrics (if supported)
# prometheus

# Bandwidth limitation per session (bytes per second)
# bps-capacity=0

# Total bandwidth limitation (bytes per second)
# total-quota=0

# User quota (bytes)
# user-quota=0

# Enable origin check
# check-origin-consistency

# TURN REST API secret (for dynamic credential generation)
# use-auth-secret
# static-auth-secret=your-secret-key

# Enable WebRTC support
# web-admin
# web-admin-ip=127.0.0.1
# web-admin-port=8080
